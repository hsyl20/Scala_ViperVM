\documentclass[twoside,justified]{tufte-book}

%\usepackage[cm]{fullpage}
\usepackage[english]{babel}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc} 
%\usepackage[colorlinks,hyperindex,bookmarks,linkcolor=black,citecolor=black,urlcolor=black]{hyperref}
\usepackage{lmodern}
\usepackage{color}
\usepackage{amssymb}
%\usepackage{fancybox}
\usepackage{fancyhdr}
\usepackage[boxed]{algorithm2e}
%\usepackage{alltt}
%\usepackage{cmbright,textcomp}
\usepackage{graphicx}
%\usepackage{wrapfig}
%\usepackage{epsf}
%\usepackage[toc]{appendix} 
\usepackage{multirow}
\usepackage{framed}
\usepackage{listings}
\usepackage{subfig}
\usepackage{multirow}
\usepackage{rotating}
\usepackage{amsmath, amsthm, amssymb}

\newcommand{\theauthor}{Sylvain Henry}
\newcommand{\thetitle}{ViperVM Manual}
\newcommand{\theedition}{\sffamily\textls[200]{\MakeTextUppercase{Alpha Edition}}\normalfont}
\newcommand{\thepublisher}{September 2011}
\title{\thetitle}
\author{\theauthor}
\date{September 2011}


\titlecontents{part}%
    [0pt]% distance from left margin
    {\addvspace{0.25\baselineskip}}% above (global formatting of entry)
    {\allcaps{Part~\thecontentslabel}\allcaps}% before w/ label (label = ``Part I'')
    {\allcaps{Part~\thecontentslabel}\allcaps}% before w/o label
    {}% filler and page (leaders and page num)
    [\vspace*{0.5\baselineskip}]% after

\titlecontents{chapter}%
    [4em]% distance from left margin
    {}% above (global formatting of entry)
    {\contentslabel{2em}\textit}% before w/ label (label = ``Chapter 1'')
    {\hspace{0em}\textit}% before w/o label
    {\qquad\thecontentspage}% filler and page (leaders and page num)
    [\vspace*{0.5\baselineskip}]% after

\renewcommand{\maketitlepage}{
\begin{titlepage}
  \thispagestyle{empty}
  \setlength{\parindent}{0pt}

  \fontsize{24}{24}\selectfont\textit{\theauthor}

  \vspace{1.75in}\fontsize{36}{54}\selectfont\thetitle

  \vspace{0.5in}\fontsize{14}{14}\selectfont\theedition

  \vfill\fontsize{14}{14}\selectfont\textit{\thepublisher} 
\end{titlepage}
}


\definecolor{codeboxcolor}{rgb}{0.8,0.8,1}

\newcommand{\infobox}[1]{
   \definecolor{shadecolor}{rgb}{0.9,0.9,0.9} 
   \begin{shaded}#1\end{shaded}
}

\newcommand{\warning}[1]{
   \definecolor{shadecolor}{rgb}{0.4,0.4,1} 
   \begin{shaded}
      \textbf{Warning! }
      #1
   \end{shaded}
}

\newcommand{\todo}[1]{%
   \definecolor{shadecolor}{rgb}{1,0.2,0.2}
   \begin{shaded}
      \textbf{TODO: }
      #1
   \end{shaded}
}

\newcommand{\opencl}[1]{%
   \definecolor{shadecolor}{rgb}{0.9,0.9,0.7}
   \begin{shaded}
      \textbf{OpenCL }
      #1
   \end{shaded}
}

\lstset{language=C,
        breaklines, breakatwhitespace,
        frame=shadowbox, rulesepcolor=\color{codeboxcolor},
        captionpos=b, basicstyle=\scriptsize}

\newtheorem{mydef}{Definition}

\lstdefinelanguage{Scala}{
    morekeywords={%
        abstract,case,catch,class,def,do,else,extends,%
        false,final,finally,for,forSome,if,implicit,import,lazy,%
        match,new,null,object,override,package,private,protected,%
        return,sealed,super,this,throw,trait,true,try,type,%
        val,var,while,with,yield},%
    sensitive,%
    morecomment=[l]//,%
    morecomment=[s]{/*}{*/},%
}[keywords,comments]%

\begin{document}

\frontmatter

\maketitle

\tableofcontents

\input{intro}

\mainmatter

\input{platform}

\input{layers}
\input{runtime}
\input{scheduling}
\input{choices}
\input{dsl}
\input{codegen}

\bibliographystyle{plain}
\bibliography{biblio}

\end{document}
